 <!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>
    XRP
  </title>
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
  <!--     Fonts and icons     -->
<link href="https://fonts.googleapis.com/css2?family=Exo:wght@300&display=swap" rel="stylesheet">
<script
  src="https://code.jquery.com/jquery-3.5.1.js"
  integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
  crossorigin="anonymous"></script>
<link rel="stylesheet" type="text/css" href="style.css">

<script src="https://unpkg.com/xrpl/build/xrpl-latest-min.js"></script>
</head>

<body>

  <nav class="xrpnav">
  <button id="create-wallet" class="btn ">Crear Cartera</button>
   <button id="import-wallet" class="btn ">Import Wallet</button>
     <button id="send-xrp" class="btn " disabled>Send XRP</button>
       <div class="theme-sel">
          <section class="day">

            <a href="#" id="day-theme">
              <svg id="Capa_1" fill="#FFFFFF" enable-background="new 0 0 512 512"viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><g><g><path d="m256 360.099c-57.4 0-104.099-46.698-104.099-104.099s46.699-104.099 104.099-104.099 104.099 46.699 104.099 104.099-46.699 104.099-104.099 104.099z"/></g><g><path d="m256 116.071c-8.284 0-15-6.716-15-15v-86.071c0-8.284 6.716-15 15-15s15 6.716 15 15v86.071c0 8.284-6.716 15-15 15z"/></g><g><path d="m146.449 161.449c-3.839 0-7.678-1.464-10.606-4.393l-60.863-60.862c-5.858-5.858-5.858-15.355 0-21.213 5.857-5.858 15.355-5.858 21.213 0l60.862 60.861c5.858 5.858 5.858 15.355 0 21.213-2.928 2.929-6.767 4.394-10.606 4.394z"/></g><g><path d="m101.071 271h-86.071c-8.284 0-15-6.716-15-15s6.716-15 15-15h86.071c8.284 0 15 6.716 15 15s-6.716 15-15 15z"/></g><g><path d="m85.587 441.413c-3.839 0-7.678-1.464-10.606-4.394-5.858-5.858-5.858-15.355 0-21.213l60.862-60.861c5.858-5.857 15.356-5.857 21.213 0 5.858 5.858 5.858 15.355 0 21.213l-60.863 60.862c-2.928 2.928-6.767 4.393-10.606 4.393z"/></g><g><path d="m256 512c-8.284 0-15-6.716-15-15v-86.071c0-8.284 6.716-15 15-15s15 6.716 15 15v86.071c0 8.284-6.716 15-15 15z"/></g><g><path d="m426.413 441.413c-3.839 0-7.678-1.464-10.606-4.393l-60.862-60.861c-5.858-5.858-5.858-15.355 0-21.213 5.857-5.858 15.355-5.858 21.213 0l60.862 60.861c5.858 5.858 5.858 15.355 0 21.213-2.929 2.928-6.768 4.393-10.607 4.393z"/></g><g><path d="m497 271h-86.071c-8.284 0-15-6.716-15-15s6.716-15 15-15h86.071c8.284 0 15 6.716 15 15s-6.716 15-15 15z"/></g><g><path d="m365.551 161.449c-3.839 0-7.678-1.464-10.606-4.394-5.858-5.858-5.858-15.355 0-21.213l60.862-60.861c5.857-5.856 15.355-5.858 21.213 0s5.858 15.355 0 21.213l-60.862 60.861c-2.929 2.929-6.769 4.394-10.607 4.394z"/></g></g></svg>
            </a>
          </section>
          <section class="night">
            <a href="#" id="night-theme">
              <svg  fill="#FFFFFF" viewBox="-12 0 448 448.04455"  xmlns="http://www.w3.org/2000/svg"><path d="m224.023438 448.03125c85.714843.902344 164.011718-48.488281 200.117187-126.230469-22.722656 9.914063-47.332031 14.769531-72.117187 14.230469-97.15625-.109375-175.890626-78.84375-176-176 .972656-65.71875 37.234374-125.832031 94.910156-157.351562-15.554688-1.980469-31.230469-2.867188-46.910156-2.648438-123.714844 0-224.0000005 100.289062-224.0000005 224 0 123.714844 100.2851565 224 224.0000005 224zm0 0"/></svg>


            </a>
          </section>
        </div>  
  </nav>

    <div>
     <section class="eth-logo">
<img class="logo" src="logo.svg"/>
      <div class="ripple-background" style="z-index: -1000;position: fixed;top:10%;left: 50%;">
        <div class="circle xxlarge shade1"></div>
        <div class="circle xlarge shade2"></div>
        <div class="circle large shade3"></div>
        <div class="circle mediun shade4"></div>
        <div class="circle small shade5"></div>
    </div>
     </section> 


      <section>
        <div class="content-inputs">
          <h1>Envia Dinero a Mexico</h1>
            <pre id="output"></pre>
  <h2>US RLUSD</h2>
  <div class="converter">
        <label for="usdInput">Enter Amount in USD:</label>
        <input type="number" id="usdInput" placeholder="USD" step="0.01">
        <div class="output">
            <p id="exchangeRate">Exchange Rate: --</p>
            <p id="convertedAmount">In MXN: --</p>
        </div>
    </div>

    <script src="script.js"></script>

          <button href="#" class="btn submit">Mandar</button>
          <a class="success d-nonw" href="#">Success</a>
        </div>
      </section>

      <section class="" id="location">
        
      </section>
    </div>

 <h3>Latest XRP Transactions</h3>
  <table id="transactions-table">
    <thead>
      <tr>
        <th>Type</th>
        <th>Amount</th>
        <th>Destination</th>
        <th>Transaction Hash</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td colspan="4">No transactions available.</td>
      </tr>
    </tbody>
  </table>
  <script>
    const client = new xrpl.Client("wss://s.altnet.rippletest.net:51233"); // Testnet client
    let currentWallet = null; // Store the currently active wallet

    async function connectClient() {
      if (!client.isConnected()) {
        await client.connect();
      }
    }

    async function displayWalletDetails(wallet, status) {
      await connectClient();

      try {
        const accountInfo = await client.request({
          command: "account_info",
          account: wallet.address,
          ledger_index: "validated",
        });

        const balance = accountInfo.result.account_data.Balance;
        document.getElementById("output").textContent = `
          Status: ${status}
          Wallet Address: ${wallet.address}
          Wallet Secret: ${wallet.seed}
          XRP Balance: ${xrpl.dropsToXrp(balance)} XRP
        `;

        document.getElementById("send-xrp").disabled = false;

        await fetchTransactions(wallet.address);
      } catch (error) {
        document.getElementById("output").textContent = `
          Status: ${status}
          Wallet Address: ${wallet.address}
          Wallet Secret: ${wallet.seed}
          XRP Balance: Unable to fetch (Wallet may not be funded)
        `;
      }
    }

    async function fetchTransactions(address) {
      const tableBody = document.querySelector("#transactions-table tbody");
      tableBody.innerHTML = "<tr><td colspan='4'>Loading transactions...</td></tr>";

      try {
        const transactions = await client.request({
          command: "account_tx",
          account: address,
          ledger_index_min: -1,
          ledger_index_max: -1,
          limit: 10,
        });

        if (transactions.result.transactions.length > 0) {
          tableBody.innerHTML = ""; // Clear the table
          transactions.result.transactions.forEach((tx) => {
            const txn = tx.tx;
            const type = txn.TransactionType || "Unknown";
            const amount = txn.Amount ? xrpl.dropsToXrp(txn.Amount) + " XRP" : "N/A";
            const destination = txn.Destination || "N/A";
            const hash = txn.hash || "N/A";

            const explorerUrl = `https://testnet.xrpl.org/transactions/${hash}`;

            const row = `
              <tr>
                <td>${type}</td>
                <td>${amount}</td>
                <td>${destination}</td>
                <td><a href="${explorerUrl}" target="_blank">${hash}</a></td>
              </tr>
            `;
            tableBody.innerHTML += row;
          });
        } else {
          tableBody.innerHTML = "<tr><td colspan='4'>No transactions found.</td></tr>";
        }
      } catch (error) {
        tableBody.innerHTML = `<tr><td colspan='4'>Error fetching transactions: ${error.message}</td></tr>`;
      }
    }

    document.getElementById("create-wallet").addEventListener("click", async () => {
      const wallet = xrpl.Wallet.generate();
      currentWallet = wallet;
      await displayWalletDetails(wallet, "Created");

      alert(`New wallet created!\n\nWallet Address: ${wallet.address}\nWallet Secret: ${wallet.seed}\n\nIMPORTANT: Save your wallet secret securely.`);
      document.getElementById("create-wallet").style.display = "none";
    });

    document.getElementById("import-wallet").addEventListener("click", async () => {
      const secret = prompt("Enter your wallet secret:");
      if (!secret) {
        alert("No secret provided.");
        return;
      }

      try {
        const wallet = xrpl.Wallet.fromSeed(secret);
        currentWallet = wallet;
        await displayWalletDetails(wallet, "Imported");

        alert(`Wallet imported successfully!\n\nWallet Address: ${wallet.address}`);
      } catch (error) {
        alert("Invalid wallet secret. Please try again.");
      }
    });

    document.getElementById("send-xrp").addEventListener("click", async () => {
      if (!currentWallet) {
        alert("No wallet connected. Create or import a wallet first.");
        return;
      }

      const destination = prompt("Enter the recipient's wallet address:");
      if (!destination) {
        alert("No destination address provided.");
        return;
      }

      const amount = prompt("Enter the amount of XRP to send:");
      if (!amount || isNaN(amount) || parseFloat(amount) <= 0) {
        alert("Invalid amount provided.");
        return;
      }

      try {
        await connectClient();

        const payment = {
          TransactionType: "Payment",
          Account: currentWallet.address,
          Destination: destination,
          Amount: xrpl.xrpToDrops(amount),
        };

        const prepared = await client.autofill(payment);
        const signed = currentWallet.sign(prepared);

        const result = await client.submitAndWait(signed.tx_blob);

        if (result.result.meta.TransactionResult === "tesSUCCESS") {
          alert(`Transaction successful!\n\nTransaction Hash: ${signed.hash}`);
        } else {
          alert(`Transaction failed: ${result.result.meta.TransactionResult}`);
        }

        await displayWalletDetails(currentWallet, "Updated");
      } catch (error) {
        alert(`Error sending XRP: ${error.message}`);
      }
    });
  </script>

  <script src="app.js"></script>

    <script type="text/javascript">
      //whoosh 2020

 $(document).ready(function() {
     var d = new Date();
      document.getElementById("location").innerHTML = d;

   $("#day-theme").click(function(){
      $('body').addClass('daytheme')
    });
   
   $("#night-theme").click(function(){
      $('body').removeClass('daytheme')
    });
   
 });

    </script>
</body>

</html>